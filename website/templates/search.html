{% extends 'base.html' %}
{% block title %}Search{% endblock %}

{% block content %}
<div class="container">
<a href="/crawl">Go to crawl</a>
<a href="/search">Go to search?</a>
<br>
<br>
<form method="post">
    {% csrf_token %}
    
    <select name="input_website">
        {% if searchWebsite %}
            <option selected value="{{searchWebsite}}">{{searchWebsite}}</option>
        {% else %}
            <option disabled selected value="">Website</option>
        {% endif %}
        
        {% for website in searchableWebsites %}
            {% if website.0 != searchWebsite %}
                <option value="{{ website.0 }}">{{ website.0 }}</option>
            {% endif %}
        {% endfor %}
    </select>
    
    <select name="input_method">
        {% if searchMethod %}
            <option selected value="{{searchMethod}}">{{searchMethodName}}</option>
        {% else %}
            <option disabled selected value="">Search method</option>
        {% endif %}
        
        {% for method in searchMethods %}
            {% if method.1 != searchMethod %}
                <option value="{{ method.1 }}">{{ method.0 }}</option>
            {% endif %}
        {% endfor %}
    </select>
    
    <input autocomplete="off" name="input_search" placeholder="Search term" type="text">
    <input type="submit" value="Search">
</form>
</div>
{% if searchWebsite %}
<div class="container">
<table class="table table-striped">
    <thead>
        <tr>
            <th scope="col">Page Title / URL</th>
            <th scope="col">Number of Matches Found</th>
        </tr>
    </thead>
    <tbody>
        {% for result in searchResults %}
        <tr>
            <td><a href="{{result.1}}" target="_blank" rel="noopener noreferrer">{{result.2}}</a></td>
            <td>{{result.0}}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
Found "{{searchTerm}}" on {{foundPages}} pages in {{searchTime}} milliseconds
</div>
{% endif %}

{% endblock %}